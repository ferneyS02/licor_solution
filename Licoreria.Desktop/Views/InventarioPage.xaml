<Page x:Class="Licoreria.Desktop.Views.InventarioPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Inventario" Background="#000000">

    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Barra superior -->
        <Border CornerRadius="12" Background="#0F0F0F" Padding="12">
            <DockPanel LastChildFill="False">
                <TextBlock Text="Inventario (Admin/Sistema)" Foreground="White" FontSize="18"
                           Margin="0,0,16,0" DockPanel.Dock="Left"/>

                <StackPanel Orientation="Horizontal" DockPanel.Dock="Right">
                    <TextBlock Text="Categoría" Foreground="White" VerticalAlignment="Center" Margin="0,0,8,0"/>
                    <ComboBox x:Name="CboCategoria" Width="220" Height="30" Margin="0,0,12,0"
                              DisplayMemberPath="Nombre" SelectedValuePath="IdCategoria"
                              SelectionChanged="Categoria_SelectionChanged"/>

                    <TextBlock Text="Buscar" Foreground="White" VerticalAlignment="Center" Margin="0,0,8,0"/>
                    <TextBox x:Name="TxtBuscar" Width="220" Height="30" Margin="0,0,12,0"
                             KeyDown="Buscar_KeyDown"
                             TextChanged="Buscar_TextChanged"/>

                    <Button Content="Refrescar" Padding="10,6" Margin="0,0,8,0"
                            Background="#D4AF37" Foreground="White" Click="Refrescar_Click"/>
                    <Button Content="Nuevo" Padding="10,6"
                            Background="#222" Foreground="White" Click="Nuevo_Click"/>
                </StackPanel>
            </DockPanel>
        </Border>

        <!-- Contenido -->
        <Grid Grid.Row="1" Margin="0,12,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="1.2*"/>
            </Grid.ColumnDefinitions>

            <!-- Lista -->
            <Border Grid.Column="0" CornerRadius="12" Background="#0F0F0F" Padding="10" Margin="0,0,10,0">
                <DataGrid x:Name="GridProductos"
                          AutoGenerateColumns="False"
                          IsReadOnly="True"
                          HeadersVisibility="Column"
                          SelectionMode="Single"
                          SelectionChanged="GridProductos_SelectionChanged"
                          Background="#0F0F0F"
                          Foreground="Black"
                          RowBackground="White"
                          AlternatingRowBackground="#F2F2F2"
                          BorderThickness="0">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ID" Binding="{Binding IdProducto}" Width="70"/>
                        <DataGridTextColumn Header="Nombre" Binding="{Binding Nombre}" Width="*"/>
                        <DataGridTextColumn Header="Precio" Binding="{Binding PrecioActual}" Width="120"/>
                        <DataGridTextColumn Header="Stock" Binding="{Binding Stock}" Width="100"/>
                    </DataGrid.Columns>
                </DataGrid>
            </Border>

            <!-- Editor (con SCROLL para que se vean botones) -->
            <Border Grid.Column="1" CornerRadius="12" Background="#0F0F0F" Padding="12">
                <ScrollViewer VerticalScrollBarVisibility="Auto"
                              HorizontalScrollBarVisibility="Disabled">
                    <StackPanel>
                        <TextBlock Text="Editar / Crear" Foreground="White" FontSize="16" Margin="0,0,0,12"/>

                        <TextBlock Text="ID" Foreground="White"/>
                        <TextBox x:Name="TxtId" Height="28" IsReadOnly="True"/>

                        <TextBlock Text="Nombre" Foreground="White" Margin="0,10,0,0"/>
                        <TextBox x:Name="TxtNombre" Height="28"/>

                        <TextBlock Text="Precio" Foreground="White" Margin="0,10,0,0"/>
                        <TextBox x:Name="TxtPrecio" Height="28"/>

                        <TextBlock Text="Stock" Foreground="White" Margin="0,10,0,0"/>
                        <TextBox x:Name="TxtStock" Height="28"/>

                        <TextBlock Text="Categoría" Foreground="White" Margin="0,10,0,0"/>
                        <ComboBox x:Name="CboCategoriaEdit" Height="30"
                                  DisplayMemberPath="Nombre" SelectedValuePath="IdCategoria"/>

                        <TextBlock Text="Imagen (nombre archivo)" Foreground="White" Margin="0,10,0,0"/>
                        <TextBox x:Name="TxtImagen" Height="28" TextChanged="TxtImagen_TextChanged"/>

                        <Button Content="Cargar imagen (500*500)..." Padding="10,6" Margin="0,10,0,0"
                                Background="#222" Foreground="White" Click="CargarImagen_Click"/>

                        <TextBlock Text="Vista previa" Foreground="White" Margin="0,10,0,4"/>
                        <Border CornerRadius="10" Background="#111" Padding="8">
                            <Image x:Name="ImgPreview" Height="100" Stretch="Uniform"/>
                        </Border>

                        <TextBlock x:Name="TxtEstado" Foreground="#D4AF37" Margin="0,12,0,0" TextWrapping="Wrap"/>

                        <WrapPanel Margin="0,14,0,0">
                            <Button Content="Guardar NUEVO" Padding="10,6" Margin="0,0,8,8"
                                    Background="#D4AF37" Foreground="White" Click="GuardarNuevo_Click"/>
                            <Button Content="Actualizar TODO" Padding="10,6" Margin="0,0,8,8"
                                    Background="#D4AF37" Foreground="White" Click="Actualizar_Click"/>
                            <Button Content="Solo PRECIO" Padding="10,6" Margin="0,0,8,8"
                                    Background="#222" Foreground="White" Click="SoloPrecio_Click"/>
                            <Button Content="Eliminar" Padding="10,6" Margin="0,0,8,8"
                                    Background="#8B0000" Foreground="White" Click="Eliminar_Click"/>
                        </WrapPanel>
                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Grid>
    </Grid>
</Page>
